\section{Issue \#47: Create Citizen Selection Screen Flutter} 
\label{sect:chooseCitizenFlutter}
The first couple of days after changing to Flutter, we started to implement our first Flutter issue, which consisted of the user story: "As a guardian I would like to be able to choose a citizen so that I can choose who Iâ€™m editing the week plan for". The issue was divided into the following sub-tasks:

\begin{itemize}
    \item Make a screen to list all citizens.
    \item Make use of a BLoC to handle the data.
    \item Make a widget to standardise how to show a citizen.
    \item When choosing a citizen I should be routed to the weekplan selection screen.
\end{itemize}

These tasks were developed together in the development group. This way, we could work together to try to get familiar with Flutter. As we got more experienced with Flutter, we decided to use pair programming.
Our first issue after the change to Flutter concerned the design of the UI for selecting a citizen. This was very similar to the issue we were assigned when the application was implemented with Xamarin. This time we had to build up the UI from scratch, rather than redesign the existing interface. 
The prototype that was given for the Xamarin UI still applied for the Flutter UI, and can be seen together with the previous citizen selection screen from Xamarin in section~\ref{sect:chooseCitizenXamarin}. This gave us a starting point for the layout of the UI and allowed us to immediately begin implementing it according to the prototype, instead of trying to adjust an already existing UI.
The results of the design in Flutter can be seen on figure~\ref{fig:flutterChooseCitizenHorizontal}.

For the UI, a BLoC was created to be responsible for the business logic of the citizen selection screen. The BLoC was responsible for making a call through the client API to the server, to get the citizens for the logged in guardian. The BLoC adds the citizens to a stream on which the citizen selection screen listens and builds a citizen widget accordingly for each of the citizens added.

\figur  {H} %Placement
        {0.7} %Size
        {sections/1Sprint/images/chooseCitizenScreen_new_horizontal.jpg} %Filepath
        {Landscape citizen selection screen after the remake in Flutter.} %Caption
        {fig:flutterChooseCitizenHorizontal} %Label

The redesign of the screen for selecting a citizen made it possible to see multiple citizens side by side with their name and picture. The amount of citizens displayed on each row depended on whether the device was in landscape or portrait mode. 
The ability to search for a citizen was removed in the new design, as it was not included in the prototype provided by the PO group.